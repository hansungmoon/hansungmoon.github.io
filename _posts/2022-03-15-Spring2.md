---
layout: single
title:  "김영한님의 스프링 핵심원리 정리2"
---

### OCP를 지키기 위한 의존관계

![image-20220315204547408](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315204547408.png)

![image-20220315204607292](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315204607292.png)

- 인터페이스에만 의지해야 하지만 구체클래스에도 같이 의지 하고있다
- 그래서 구체 클래스를 변경할 때 클라언트 코드도 변경해야한다



### AppConfig 이용

- 애플리케이션의 전체 동작 방식을 구성(config)하기 위해, 구현 객체를 생성하고, 연결하는 책임을 가지는
  별도의 설정 클래스를 만들자.
- AppConfig는 애플리케이션의 실제 동작에 필요한 구현 객체를 생성한다.
- AppConfig는 생성한 객체 인스턴스의 참조(레퍼런스)를 생성자를 통해서 주입(연결)해준다.

![image-20220315205125265](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315205125265.png)

![image-20220315205316718](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315205316718.png)

- 객체의 생성과 연결은 AppConfig가 담당한다
- 이제 구체 클래스를 변경할 때는 AppConfig만 수정해주면 된다

![image-20220315205338022](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315205338022.png)

- 이렇듯 프로그램의 제어 흐름을 직접 제어하는 것이 아니라 외부에서 관리하는 것을 제어의 역전(**IoC**)이라 한다

####  DI

- 애플리케이션 **실행 시점(런타임)**에 외부에서 실제 구현 객체를 생성하고 클라이언트에 전달해서
  클라이언트와 서버의 실제 의존관계가 연결 되는 것을 **의존관계 주입**이라 한다.
- 객체 인스턴스를 생성하고, 그 참조값을 전달해서 연결된다.
- 의존관계 주입을 사용하면 클라이언트 코드를 변경하지 않고, 클라이언트가 호출하는 대상의 타입
  인스턴스를 변경할 수 있다.
- 의존관계 주입을 사용하면 정적인 클래스 의존관계를 변경하지 않고, 동적인 객체 인스턴스 의존관계를
  쉽게 변경할 수 있다.

#### IoC 컨테이너, DI 컨테이너

- AppConfig 처럼 객체를 생성하고 관리하면서 의존관계를 연결해 주는 것을
  IoC 컨테이너 또는 DI 컨테이너라 한다.
- 의존관계 주입에 초점을 맞추어 최근에는 주로 DI 컨테이너라 한다.



## 스프링 컨테이너 

- ApplicationContext 를 스프링 컨테이너라 한다.
- ApplicationContext 는 인터페이스이다.
- 스프링 컨테이너는 XML을 기반으로 만들 수 있고, 애노테이션 기반의 자바 설정 클래스로 만들 수 있다.
- 직전에 AppConfig 를 사용했던 방식이 애노테이션 기반의 자바 설정 클래스로 스프링 컨테이너를 만든
  것이다.

**1.  스프링 컨테이너 생성**

![image-20220315210411053](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315210411053.png)

- 스프링 컨테이너를 생성할 때는 구성 정보를 지정해줘야한다.

**2.  스프링 빈 등록**

![image-20220315210528892](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315210528892.png)

-  **빈 이름은 항상 다른 이름을 부여해야 한다. 같은 이름을 부여하면, 다른 빈이 무시되거나, 기존 빈을
  덮어버리거나 설정에 따라 오류가 발생한다.**

**3.  스프링 빈 의존관계 설정**

![image-20220315210707839](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315210707839.png)

## BeanFactory와 ApplicationContext

**BeanFactory**

- 스프링 컨테이너의 최상위 인터페이스다.
- 스프링 빈을 관리하고 조회하는 역할을 담당한다.
- getBean() 을 제공한다.



**ApplicationContext**

- BeanFactory 기능을 모두 상속받아서 제공한다.
- 애플리케이션을 개발할 때는 빈은 관리하고 조회하는 기능은 물론이고, 수 많은 부가기능이 필요하다. 

![image-20220315211020224](C:\Users\HOME\AppData\Roaming\Typora\typora-user-images\image-20220315211020224.png)